<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
<script type="importmap">
    {
        "imports": {
        "@orillusion/core": "https://cdn.orillusion.com/orillusion.es.js"
        }
    }
</script>
<script type="module">
    import {
        Engine3D,
        Scene3D,
        Object3D,
        Camera3D,
        View3D,
        LitMaterial,
        BoxGeometry,
        MeshRenderer,
        DirectLight,
        PointLight,
        HoverCameraController,
        AtmosphericComponent,
        Color,
        SolidColorSky,
        SkyRenderer
    } from '@orillusion/core';

    // 初始化渲染引擎
    await Engine3D.init()
    // create new scene as root node
    let scene = new Scene3D()


    // 创建一个纯色贴图
    let colorSky = new SolidColorSky(new Color(0, 0, 0, 1))
    // 添加 SkyRenderer 组件，然后设置 map 贴图
    let sky = scene.addComponent(SkyRenderer);
    sky.map = colorSky;

    // 同时设置单色环境光
    scene.envMap = colorSky;


    // 创建相机
    let cameraObj = new Object3D()
    let camera = cameraObj.addComponent(Camera3D)
    camera.perspective(60, Engine3D.aspect, 1, 5000.0)
    let controller = cameraObj.addComponent(HoverCameraController)
    controller.setCamera(0, -5, 5)
    scene.addChild(cameraObj)

    // 平行光源
    let light = new Object3D()
    light.rotationX = 90;
    let dl = light.addComponent(DirectLight);
    dl.lightColor = new Color(1.0, 1.0, 1.0, 1.0);
    dl.intensity = 60;
    scene.addChild(light);


    // 点光源
    // let light = new Object3D()
    // light.x = 0;                                            // 从上往下的点光源
    // light.y = 20;
    // let pointLight = light.addComponent(PointLight)          // 点光源
    // pointLight.lightColor = new Color(1.0, 1.0, 1.0, 1.0)    // 光照颜色
    // pointLight.range = 30;                                   // 光照最远距离
    // pointLight.intensity = 40                               // 光照强度
    // scene.addChild(light);
   
    // 加载 gltf 文件
    let data = await Engine3D.res.loadGltf('scene.gltf');
    data.rotationX = -90;
    data.rotationY = 90;
    scene.addChild(data);



    let view = new View3D()
    view.scene = scene
    view.camera = camera

    // start render
    Engine3D.startRenderView(view)

</script>
</body>

</html>